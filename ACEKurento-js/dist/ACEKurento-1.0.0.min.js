/*!
 * @license ACEDirect v1.0.0
 * Copyright 2019 ACEDirect. All Rights Reserved.
 */
function ACEKurento(a){function b(a,c){var d=Object.prototype.toString,e=d.call({});for(var f in c)c[f]&&e===d.call(c[f])?(a[f]=a[f]||{},b(a[f],c[f])):a[f]=c[f];return a}function c(a){switch(a){case m:break;case n:break;case o:d(q);break;default:return}p=a}function d(a){switch(a){case q:break;case r:break;case s:break;default:return}v.callState=a}function e(a){if(a.error){c(m);var b=a.error||"Unknown reason for register rejection.";console.log(b)}else c(o)}function f(a){if("accepted"!=a.response){console.info("Call not accepted by peer. Closing call");var b=a.message?a.message:"Unknown reason for call rejection.";console.log(b),stop()}else d(s),v.eventHandlers.accepted(),l.processAnswer(a.sdpAnswer)}function g(a){d(s),l.processAnswer(a.sdp)}function h(a){return v.callState===q||v.isLoopback||a.isWarmTransfer?void v.eventHandlers.incomingCall({from:a.caller,accept:function(){v.acceptCall(a)},reject:function(){v.declineCall(a)}}):v.declineCall(a)}function i(a){var b=JSON.stringify(a);console.log("Sending message: "+b),k.send(b)}function j(a){console.log("Local candidate"+JSON.stringify(a));var b={id:"ice",candidate:a};i(b)}var k;k=a&&a.hasOwnProperty("acekurentoSignalingUrl")?new WebSocket(a.acekurentoSignalingUrl):new WebSocket("wss://"+window.location.host+"/signaling");var l;const m=0,n=1,o=2;var p=m;const q=0,r=1,s=2;var t=null,u=!1,v=v||{};return b(v,{ua:k,enableVideo:!0,enableAudio:!0,rtcSession:{},selfStream:this.selfStream||null,remoteStream:this.remoteStream||null,pc:function(){return l.peerConnection},mediaStream:function(){return l.localVideo.srcObject},callid:"",previous_callid:"",callState:this.callState||null,isLoopback:this.isLoopback||!1,isScreensharing:this.isScreensharing||!1,configuration:{connectionId:void 0,acekurentoSignalingUrl:this.acekurentoSignalingUrl,displayName:this.displayName,sipUsername:this.sipUsername,sipPassword:this.sipPassword,guestUser:!1,sipUri:this.sipUri},eventHandlers:{connected:function(a){},registerResponse:function(a){},callResponse:function(a){},incomingCall:function(a){},progress:function(a){},accepted:function(a){},sipConfirmed:function(a){},callError:function(a){},ended:function(a){},pausedQueue:function(a){},unpausedQueue:function(a){},startedRecording:function(a){},stoppedRecording:function(a){},inviteResponse:function(a){},callTransferResponse:function(a){},reinviteResponse:function(a){},updateResponse:function(a){},restartCallResponse:function(a){},participantsUpdate:function(a){},newMessage:function(a){}},loopback:function(a){d(r),this.isLoopback=!0;var b={localVideo:this.selfStream,remoteVideo:this.remoteStream,onicecandidate:j,mediaConstraints:{audio:this.enableVideo,video:this.enableAudio}};console.log("create webRtcPeer ..."),l=kurentoUtils.WebRtcPeer.WebRtcPeerSendrecv(b,function(b){b&&(console.error(b),d(q)),console.log("created webRtcPeer"),this.generateOffer(function(b,c){b&&(console.error(b),d(q)),console.log("Generate offer");var e={id:"loopback",ext:a,sdp:c};i(e)})})},register:function(a,b,d){var e=a||this.sipUsername,f=b||this.sipPassword;if(!e)throw new Error("You must insert your user uri extension");c(n);var g={id:"register",ext:e,password:f,isAgent:d};i(g)},call:function(a,b){if(!a)return void console.log("You must specify the peer ext");if(v.callState===r||v.callState===s)return void console.log("You are already on a call");d(r);var c={localVideo:this.selfStream,remoteVideo:this.remoteStream,onicecandidate:j,mediaConstraints:{audio:this.enableVideo,video:this.enableAudio}};console.log("create webRtcPeer ..."),l=kurentoUtils.WebRtcPeer.WebRtcPeerSendrecv(c,function(c){c&&(console.error(c),d(q)),console.log("created webRtcPeer"),this.generateOffer(function(c,e){c&&(console.error(c),d(q)),console.log("Generate offer");var f={id:"call",uri:a,sdp:e,skipQueue:b};i(f)})})},acceptCall:function(a){d(r);var b={localVideo:this.selfStream,remoteVideo:this.remoteStream,onicecandidate:j,mediaConstraints:{audio:this.enableAudio,video:this.enableVideo}};l=kurentoUtils.WebRtcPeer.WebRtcPeerSendrecv(b,function(b){b&&(console.error(b),d(q)),this.generateOffer(function(b,c){b&&(console.error(b),d(q));var e={id:"accept",caller:a.caller,sdp:c};i(e)})})},declineCall:function(a){console.log("Incoming call! Call state: "+this.callState),d(r);var b={id:"decline",caller:a.caller};i(b),v.stop()},stop:function(a){if(a?console.info("stop initiated! (And remove from queue)"):console.log("stop!"),d(q),l){l.dispose(),l=null;var b={id:"stop",removeFromQueue:a};i(b)}},hold:function(a){u?a(!0):(i({id:"hold"}),t=a)},unhold:function(a){u?(i({id:"unhold"}),t=a):a(!0)},privateMode:function(a,b){i({id:"privacy",enabled:a,url:a?b:void 0})},iceRestart:function(){console.info("pc createOffer restart");var a=this.pc();a.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0,iceRestart:!0}).then(function(b){return console.info("Created SDP offer"),a.setLocalDescription(b)})["catch"](function(a){console.error(a)})},sipReinvite:function(a){var b={localVideo:this.selfStream,remoteVideo:this.remoteStream,onicecandidate:j,mediaConstraints:{audio:this.enableVideo,video:this.enableAudio}};console.log("create webRtcPeer ..."),l=kurentoUtils.WebRtcPeer.WebRtcPeerSendrecv(b,function(b){b&&(console.error(b),d(q)),console.log("created webRtcPeer"),this.generateOffer(function(b,c){b&&(console.error(b),d(q)),console.log("Generate offer");var e={id:"sipReinvite",sdp:a?a:c};i(e)})})},sipUpdate:function(a){var b={localVideo:this.selfStream,remoteVideo:this.remoteStream,onicecandidate:j,mediaConstraints:{audio:this.enableVideo,video:this.enableAudio}};console.log("create webRtcPeer ..."),l=kurentoUtils.WebRtcPeer.WebRtcPeerSendrecv(b,function(b){b&&(console.error(b),d(q)),console.log("created webRtcPeer"),this.generateOffer(function(b,c){b&&(console.error(b),d(q)),console.log("Generate offer");var e={id:"sipUpdate",sdp:a?a:c};i(e)})})},pauseQueue:function(){var a={id:"pauseQueue"};i(a)},unpauseQueue:function(){var a={id:"unpauseQueue"};i(a)},startRecording:function(){var a={id:"startRecording"};i(a)},stopRecording:function(){var a={id:"stopRecording"};i(a)},startPlayingRecording:function(){var a={id:"startPlayingRecording"};i(a)},stopPlayingRecording:function(){var a={id:"stopPlayingRecording"};i(a)},invitePeer:function(a){var b={id:"invitePeer",ext:a};i(b)},callTransfer:function(a,b){var c={id:"callTransfer",ext:a,isBlind:b};i(c)},enableDisableTrack:function(a,b){var c=this.mediaStream();console.log("Set "+(b?"AUDIO":"VIDEO")+" "+(a?"ON":"OFF")),b?c.getAudioTracks()[0].enabled=!c.getAudioTracks()[0].enabled:c.getVideoTracks()[0].enabled=!c.getVideoTracks()[0].enabled,console.log((b?"AUDIO":"VIDEO")+" is "+(a?"ON":"OFF"))},screenshare:function(a){var b={localVideo:this.selfStream,remoteVideo:this.remoteStream,sendSource:a?"screen":"webcam",onicecandidate:j,mediaConstraints:{audio:this.enableVideo,video:this.enableAudio}};console.log("create webRtcPeer ..."),l=kurentoUtils.WebRtcPeer.WebRtcPeerSendrecv(b,function(b){b&&(console.error(b),d(q)),console.log("created webRtcPeer"),v.isScreensharing=a,this.generateOffer(function(a,b){a&&(console.error(a),d(q)),console.log("Generate offer");var c={id:"restartCall",sdp:b};i(c)})})}}),window.onbeforeunload=function(){k.close()},k.onmessage=function(a){try{a=JSON.parse(a.data)}catch(b){a=a.data}switch(console.info("Received message data: "+JSON.stringify(a)),a.id){case"registerResponse":e(a),v.eventHandlers.registerResponse(a.error);break;case"callResponse":f(a),v.eventHandlers.callResponse(a);break;case"incomingCall":h(a);break;case"sdp":g(a),v.eventHandlers.progress(a);break;case"sipConfirmed":v.eventHandlers.sipConfirmed(a);break;case"sessionStopped":v.stop(),v.eventHandlers.ended(a);break;case"pausedQueue":v.eventHandlers.pausedQueue(a);break;case"unpausedQueue":v.eventHandlers.unpausedQueue(a);break;case"startedRecording":v.eventHandlers.startedRecording(a);break;case"stoppedRecording":v.eventHandlers.stoppedRecording(a);break;case"ice":l.addIceCandidate(a.candidate);break;case"holdResult":u=!0,t&&t(a.success);break;case"unholdResult":u=!1,t&&t(a.success);break;case"inviteResponse":v.eventHandlers.inviteResponse(a);break;case"callTransferResponse":v.eventHandlers.callTransferResponse(a);break;case"sipReinviteResponse":v.eventHandlers.reinviteResponse(a);break;case"sipUpdateResponse":v.eventHandlers.updateResponse(a);break;case"restartCallResponse":v.eventHandlers.restartCallResponse(a);break;case"participantList":v.eventHandlers.participantsUpdate(a);break;case"newMessage":v.eventHandlers.newMessage(a);break;default:console.error("Unrecognized message",a)}},a&&(a.displayName&&(v.configuration.displayName=a.displayName),a.sipUsername&&(v.configuration.sipUsername=a.sipUsername),a.sipPassword&&(v.configuration.sipPassword=a.sipPassword),a.sipUri&&(v.configuration.sipUri=a.sipUri)),k.onopen=function(a){v.eventHandlers.connected(a)},v}!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.kurentoUtils=a()}}(function(){var a;return function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){function d(a){a&&x.error(a)}function e(a){a.stop&&a.stop()}function f(a){a.getTracks().forEach(e)}function g(a,b){var c=[];return a.addEventListener("signalingstatechange",function(){if("stable"===this.signalingState)for(;c.length;){var b=c.shift();a.addIceCandidate(b.candidate,b.callback,b.callback)}}),function(d,e){switch(e=e||b,a.signalingState){case"closed":e(new Error("PeerConnection object is closed"));break;case"stable":if(a.remoteDescription){a.addIceCandidate(d,e,e);break}default:c.push({candidate:d,callback:e})}}}function h(a){var b=a.indexOf("a=ssrc-group:FID");return b>0?a.slice(0,b):a}function i(a){var b=a.getVideoTracks();if(!b.length)return x.warn("No video tracks available in the video stream"),"";var c=["a=x-google-flag:conference","a=ssrc-group:SIM 1 2 3","a=ssrc:1 cname:localVideo","a=ssrc:1 msid:"+a.id+" "+b[0].id,"a=ssrc:1 mslabel:"+a.id,"a=ssrc:1 label:"+b[0].id,"a=ssrc:2 cname:localVideo","a=ssrc:2 msid:"+a.id+" "+b[0].id,"a=ssrc:2 mslabel:"+a.id,"a=ssrc:2 label:"+b[0].id,"a=ssrc:3 cname:localVideo","a=ssrc:3 msid:"+a.id+" "+b[0].id,"a=ssrc:3 mslabel:"+a.id,"a=ssrc:3 label:"+b[0].id];return c.push(""),c.join("\n")}function j(a,b,c){function e(){if(q){q.pause();var a=E.getRemoteStreams()[0];q.srcObject=a,x.debug("Remote stream:",a),q.load()}}function f(a){return M&&("Chrome"===B.name||"Chromium"===B.name?(x.debug("Adding multicast info"),a=new RTCSessionDescription({type:a.type,sdp:h(a.sdp)+i(r)})):x.warn("Simulcast is only available in Chrome browser.")),a}function k(){"closed"===E.signalingState&&c('The peer connection object is in "closed" state. This is most likely due to an invocation of the dispose method before accepting in the dialogue'),r&&o&&n.showLocalVideo(),r&&E.addStream(r),t&&E.addStream(t);var b=A.getBrowser();"sendonly"!==a||"Chrome"!==b.name&&"Chromium"!==b.name||39!==b.major||(a="sendrecv"),c()}function l(a){void 0===a&&(a=y),navigator.mediaDevices.getUserMedia(a).then(function(a){r=a,k()})["catch"](c)}if(!(this instanceof j))return new j(a,b,c);j.super_.call(this),b instanceof Function&&(c=b,b=void 0),b=b||{},c=(c||d).bind(this);var m,n=this,o=b.localVideo,q=b.remoteVideo,r=b.videoStream,t=b.audioStream,z=b.mediaConstraints,E=(b.connectionConstraints,b.peerConnection),F=b.sendSource||"webcam",G=b.dataChannelConfig,H=b.dataChannels||!1,I=s.v4(),J=v({iceServers:p()},b.configuration),K=b.onicecandidate;K&&this.on("icecandidate",K);var L=b.oncandidategatheringdone;L&&this.on("candidategatheringdone",L);var M=b.simulcast,N=b.multistream,O=new w.Interop,P=[],Q=!1;if(Object.defineProperties(this,{peerConnection:{get:function(){return E}},id:{value:b.id||I,writable:!1},remoteVideo:{get:function(){return q}},localVideo:{get:function(){return o}},dataChannel:{get:function(){return m}},currentFrame:{get:function(){if(q){if(q.readyState<q.HAVE_CURRENT_DATA)throw new Error("No video stream data available");var a=document.createElement("canvas");return a.width=q.videoWidth,a.height=q.videoHeight,a.getContext("2d").drawImage(q,0,0),a}}}}),!E&&(E=new RTCPeerConnection(J),H&&!m)){var R="WebRtcPeer-"+n.id,S=void 0;G&&(R=G.id||R,S=G.options),m=E.createDataChannel(R,S),G&&(m.onopen=G.onopen,m.onclose=G.onclose,m.onmessage=G.onmessage,m.onbufferedamountlow=G.onbufferedamountlow,m.onerror=G.onerror||d)}E.addEventListener("icecandidate",function(a){var b=a.candidate;if(u.listenerCount(n,"icecandidate")||u.listenerCount(n,"candidategatheringdone"))if(b){var c;c=N&&C?O.candidateToUnifiedPlan(b):b,n.emit("icecandidate",c),Q=!1}else Q||(n.emit("candidategatheringdone"),Q=!0);else Q||(P.push(b),b||(Q=!0))}),E.onaddstream=b.onaddstream,E.onnegotiationneeded=b.onnegotiationneeded,this.on("newListener",function(a,b){if("icecandidate"===a||"candidategatheringdone"===a)for(;P.length;){var c=P.shift();!c==("candidategatheringdone"===a)&&b(c)}});var T=g(E);this.addIceCandidate=function(a,b){var c;c=N&&C?O.candidateToPlanB(a):new RTCIceCandidate(a),x.debug("Remote ICE candidate received",a),b=(b||d).bind(this),T(c,b)},this.generateOffer=function(b){b=b.bind(this);var c=!0,d=!0;z&&(c="boolean"!=typeof z.audio||z.audio,d="boolean"!=typeof z.video||z.video);var e={offerToReceiveAudio:"sendonly"!==a&&c,offerToReceiveVideo:"sendonly"!==a&&d},g=e;x.debug("constraints: "+JSON.stringify(g)),E.createOffer(g).then(function(a){return x.debug("Created SDP offer"),a=f(a),E.setLocalDescription(a)}).then(function(){var a=E.localDescription;x.debug("Local description set",a.sdp),N&&C&&(a=O.toUnifiedPlan(a),x.debug("offer::origPlanB->UnifiedPlan",D(a))),b(null,a.sdp,n.processAnswer.bind(n))})["catch"](b)},this.getLocalSessionDescriptor=function(){return E.localDescription},this.getRemoteSessionDescriptor=function(){return E.remoteDescription},this.showLocalVideo=function(){o.srcObject=r,o.muted=!0},this.send=function(a){m&&"open"===m.readyState?m.send(a):x.warn("Trying to send data over a non-existing or closed data channel")},this.processAnswer=function(a,b){b=(b||d).bind(this);var c=new RTCSessionDescription({type:"answer",sdp:a});if(N&&C){var f=O.toPlanB(c);x.debug("asnwer::planB",D(f)),c=f}return x.debug("SDP answer received, setting remote description"),"closed"===E.signalingState?b("PeerConnection is closed"):void E.setRemoteDescription(c,function(){e(),b()},b)},this.processOffer=function(a,b){b=b.bind(this);var c=new RTCSessionDescription({type:"offer",sdp:a});if(N&&C){var d=O.toPlanB(c);x.debug("offer::planB",D(d)),c=d}return x.debug("SDP offer received, setting remote description"),"closed"===E.signalingState?b("PeerConnection is closed"):void E.setRemoteDescription(c).then(function(){return e()}).then(function(){return E.createAnswer()}).then(function(a){return a=f(a),x.debug("Created SDP answer"),E.setLocalDescription(a)}).then(function(){var a=E.localDescription;N&&C&&(a=O.toUnifiedPlan(a),x.debug("answer::origPlanB->UnifiedPlan",D(a))),x.debug("Local description set",a.sdp),b(null,a.sdp)})["catch"](b)},"recvonly"===a||r||t?setTimeout(k,0):"webcam"===F?l(z):navigator.getDisplayMedia?navigator.getDisplayMedia({video:!0,audio:!0}).then(function(a){r=a,navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then(function(a){t=a,k()})["catch"](c)})["catch"](c):navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then(function(a){r=a,navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then(function(a){t=a,k()})["catch"](c)})["catch"](c):(x.warn("This browser does not support getDisplayMedia, screen share might fail"),z.video={mediaSource:"screen"},l(z)),this.on("_dispose",function(){o&&(o.pause(),o.srcObject=null,o.load(),o.muted=!1),q&&(q.pause(),q.srcObject=null,q.load()),n.removeAllListeners(),void 0!==window.cancelChooseDesktopMedia&&window.cancelChooseDesktopMedia(I)})}function k(a){var b="get"+a+"Tracks";return{enumerable:!0,get:function(){if(this.peerConnection){var a=this.peerConnection.getLocalStreams();if(a.length){for(var c,d=0;c=a[d];d++)for(var e,f=c[b](),g=0;e=f[g];g++)if(!e.enabled)return!1;return!0}}},set:function(a){function c(b){b.enabled=a}this.peerConnection.getLocalStreams().forEach(function(a){a[b]().forEach(c)})}}}function l(a,b){return this instanceof l?void l.super_.call(this,"recvonly",a,b):new l(a,b)}function m(a,b){return this instanceof m?void m.super_.call(this,"sendonly",a,b):new m(a,b)}function n(a,b){return this instanceof n?void n.super_.call(this,"sendrecv",a,b):new n(a,b)}function o(a,b){return t(a,b)}var p=a("freeice"),q=a("inherits"),r=a("ua-parser-js"),s=a("uuid"),t=a("hark"),u=a("events").EventEmitter,v=a("merge").recursive.bind(void 0,!0),w=a("sdp-translator"),x=window.Logger||console,y={audio:!0,video:{width:640,framerate:15}},z=window&&window.navigator?window.navigator.userAgent:"",A=new r(z),B=A.getBrowser(),C=!1;"Chrome"!==B.name&&"Chromium"!==B.name||(x.debug(B.name+": using SDP PlanB"),C=!0);var D=function(a){return"undefined"==typeof a||null===a?"":"type: "+a.type+"\r\n"+a.sdp};q(j,u),Object.defineProperties(j.prototype,{enabled:{enumerable:!0,get:function(){return this.audioEnabled&&this.videoEnabled},set:function(a){this.audioEnabled=this.videoEnabled=a}},audioEnabled:k("Audio"),videoEnabled:k("Video")}),j.prototype.getLocalStream=function(a){if(this.peerConnection)return this.peerConnection.getLocalStreams()[a||0]},j.prototype.getRemoteStream=function(a){if(this.peerConnection)return this.peerConnection.getRemoteStreams()[a||0]},j.prototype.dispose=function(){x.debug("Disposing WebRtcPeer");var a=this.peerConnection,b=this.dataChannel;try{if(b){if("closed"===b.signalingState)return;b.close()}if(a){if("closed"===a.signalingState)return;a.getLocalStreams().forEach(f),a.close()}}catch(c){x.warn("Exception disposing webrtc peer "+c)}this.emit("_dispose")},q(l,j),q(m,j),q(n,j),c.bufferizeCandidates=g,c.WebRtcPeerRecvonly=l,c.WebRtcPeerSendonly=m,c.WebRtcPeerSendrecv=n,c.hark=o},{events:4,freeice:5,hark:8,inherits:9,"kurento-browser-extensions":10,merge:11,"sdp-translator":18,"ua-parser-js":21,uuid:23}],2:[function(a,b,c){window.addEventListener&&(b.exports=a("./index"))},{"./index":3}],3:[function(a,b,c){var d=a("./WebRtcPeer");c.WebRtcPeer=d},{"./WebRtcPeer":1}],4:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],5:[function(a,b,c){"use strict";var d=a("normalice"),e=function(b){function c(a,b){for(var c,e=[],g=[].concat(f[a]);g.length&&e.length<b;)c=Math.random()*g.length|0,e=e.concat(g.splice(c,1));return e.map(function(b){return"string"==typeof b||b instanceof String?d(a+":"+b):b})}var e,f={stun:(b||{}).stun||a("./stun.json"),turn:(b||{}).turn||a("./turn.json")},g=(b||{}).stunCount||2,h=(b||{}).turnCount||1;return e=[].concat(c("stun",g)),h&&(e=e.concat(c("turn",h))),e};b.exports=e},{"./stun.json":6,"./turn.json":7,normalice:12}],6:[function(a,b,c){b.exports=["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302"]},{}],7:[function(a,b,c){b.exports=[]},{}],8:[function(a,b,c){function d(a,b){var c=-(1/0);a.getFloatFrequencyData(b);for(var d=4,e=b.length;d<e;d++)b[d]>c&&b[d]<0&&(c=b[d]);return c}var e=a("wildemitter"),f=window.AudioContext||window.webkitAudioContext,g=null;b.exports=function(a,b){var c=new e;if(!f)return c;var b=b||{},h=b.smoothing||.1,i=b.interval||50,j=b.threshold,k=b.play,l=b.history||10,m=!0;g||(g=new f);var n,o,p;p=g.createAnalyser(),p.fftSize=512,p.smoothingTimeConstant=h,o=new Float32Array(p.fftSize),a.jquery&&(a=a[0]),a instanceof HTMLAudioElement||a instanceof HTMLVideoElement?(n=g.createMediaElementSource(a),"undefined"==typeof k&&(k=!0),j=j||-50):(n=g.createMediaStreamSource(a),j=j||-50),n.connect(p),k&&p.connect(g.destination),c.speaking=!1,c.setThreshold=function(a){j=a},c.setInterval=function(a){i=a},c.stop=function(){m=!1,c.emit("volume_change",-100,j),c.speaking&&(c.speaking=!1,c.emit("stopped_speaking"))},c.speakingHistory=[];for(var q=0;q<l;q++)c.speakingHistory.push(0);var r=function(){setTimeout(function(){if(m){var a=d(p,o);c.emit("volume_change",a,j);var b=0;if(a>j&&!c.speaking){for(var e=c.speakingHistory.length-3;e<c.speakingHistory.length;e++)b+=c.speakingHistory[e];b>=2&&(c.speaking=!0,c.emit("speaking"))}else if(a<j&&c.speaking){for(var e=0;e<c.speakingHistory.length;e++)b+=c.speakingHistory[e];0==b&&(c.speaking=!1,c.emit("stopped_speaking"))}c.speakingHistory.shift(),c.speakingHistory.push(0+(a>j)),r()}},i)};return r(),c}},{wildemitter:24}],9:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],10:[function(a,b,c){},{}],11:[function(a,b,c){!function(a){function c(a,b){if("object"!==e(a))return b;for(var d in b)"object"===e(a[d])&&"object"===e(b[d])?a[d]=c(a[d],b[d]):a[d]=b[d];return a}function d(a,b,d){var g=d[0],h=d.length;(a||"object"!==e(g))&&(g={});for(var i=0;i<h;++i){var j=d[i],k=e(j);if("object"===k)for(var l in j){var m=a?f.clone(j[l]):j[l];b?g[l]=c(g[l],m):g[l]=m}}return g}function e(a){return{}.toString.call(a).slice(8,-1).toLowerCase()}var f=function(a){return d(a===!0,!1,arguments)},g="merge";f.recursive=function(a){return d(a===!0,!0,arguments)},f.clone=function(a){var b,c,d=a,g=e(a);if("array"===g)for(d=[],c=a.length,b=0;b<c;++b)d[b]=f.clone(a[b]);else if("object"===g){d={};for(b in a)d[b]=f.clone(a[b])}return d},a?b.exports=f:window[g]=f}("object"==typeof b&&b&&"object"==typeof b.exports&&b.exports)},{}],12:[function(a,b,c){var d=["stun:","turn:"];b.exports=function(a){var b,c,e=(a||{}).url||a,f={};return"string"==typeof e||e instanceof String?(e=e.trim(),(b=d[d.indexOf(e.slice(0,5))])?(e=e.slice(5),c=e.split("@"),f.username=a.username,f.credential=a.credential,c.length>1&&(e=c[1],c=c[0].split(":"),f.username=c[0],f.credential=(a||{}).credential||c[1]||""),f.url=b+e,f.urls=[f.url],f):a):a}},{}],13:[function(a,b,c){var d=b.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(a){return a.encoding?"rtpmap:%d %s/%s/%s":a.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(a){return null!=a.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(a){return null!=a.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(a){return null!=a.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(a){return null!=a.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(a){var b="candidate:%s %d %s %d %s %d typ %s";return b+=null!=a.raddr?" raddr %s rport %d":"%v%v",b+=null!=a.tcptype?" tcptype %s":"%v",null!=a.generation&&(b+=" generation %d"),b}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{push:"invalid",names:["value"]}]};Object.keys(d).forEach(function(a){var b=d[a];b.forEach(function(a){a.reg||(a.reg=/(.*)/),a.format||(a.format="%s")})})},{}],14:[function(a,b,c){var d=a("./parser"),e=a("./writer");c.write=e,c.parse=d.parse,c.parseFmtpConfig=d.parseFmtpConfig,c.parsePayloads=d.parsePayloads,c.parseRemoteCandidates=d.parseRemoteCandidates},{"./parser":15,"./writer":16}],15:[function(a,b,c){var d=function(a){return String(Number(a))===a?Number(a):a},e=function(a,b,c,e){if(e&&!c)b[e]=d(a[1]);else for(var f=0;f<c.length;f+=1)null!=a[f+1]&&(b[c[f]]=d(a[f+1]))},f=function(a,b,c){var d=a.name&&a.names;a.push&&!b[a.push]?b[a.push]=[]:d&&!b[a.name]&&(b[a.name]={});var f=a.push?{}:d?b[a.name]:b;e(c.match(a.reg),f,a.names,a.name),a.push&&b[a.push].push(f)},g=a("./grammar"),h=RegExp.prototype.test.bind(/^([a-z])=(.*)/);c.parse=function(a){var b={},c=[],d=b;return a.split(/(\r\n|\r|\n)/).filter(h).forEach(function(a){var b=a[0],e=a.slice(2);"m"===b&&(c.push({rtp:[],fmtp:[]}),d=c[c.length-1]);for(var h=0;h<(g[b]||[]).length;h+=1){var i=g[b][h];if(i.reg.test(e))return f(i,d,e)}}),b.media=c,b};var i=function(a,b){var c=b.split("=");return 2===c.length&&(a[c[0]]=d(c[1])),a};c.parseFmtpConfig=function(a){return a.split(/\;\s?/).reduce(i,{})},c.parsePayloads=function(a){return a.split(" ").map(Number)},c.parseRemoteCandidates=function(a){for(var b=[],c=a.split(" ").map(d),e=0;e<c.length;e+=3)b.push({component:c[e],ip:c[e+1],port:c[e+2]});return b}},{"./grammar":13}],16:[function(a,b,c){var d=a("./grammar"),e=/%[sdv%]/g,f=function(a){var b=1,c=arguments,d=c.length;return a.replace(e,function(a){if(b>=d)return a;var e=c[b];switch(b+=1,a){case"%%":return"%";case"%s":return String(e);case"%d":return Number(e);case"%v":return""}})},g=function(a,b,c){var d=b.format instanceof Function?b.format(b.push?c:c[b.name]):b.format,e=[a+"="+d];if(b.names)for(var g=0;g<b.names.length;g+=1){var h=b.names[g];b.name?e.push(c[b.name][h]):e.push(c[b.names[g]])}else e.push(c[b.name]);return f.apply(null,e)},h=["v","o","s","i","u","e","p","c","b","t","r","z","a"],i=["i","c","b","a"];b.exports=function(a,b){b=b||{},null==a.version&&(a.version=0),null==a.name&&(a.name=" "),a.media.forEach(function(a){null==a.payloads&&(a.payloads="")});var c=b.outerOrder||h,e=b.innerOrder||i,f=[];
return c.forEach(function(b){d[b].forEach(function(c){c.name in a&&null!=a[c.name]?f.push(g(b,c,a)):c.push in a&&null!=a[c.push]&&a[c.push].forEach(function(a){f.push(g(b,c,a))})})}),a.media.forEach(function(a){f.push(g("m",d.m[0],a)),e.forEach(function(b){d[b].forEach(function(c){c.name in a&&null!=a[c.name]?f.push(g(b,c,a)):c.push in a&&null!=a[c.push]&&a[c.push].forEach(function(a){f.push(g(b,c,a))})})})}),f.join("\r\n")+"\r\n"}},{"./grammar":13}],17:[function(a,b,c){b.exports=function d(a){if(!a)return!1;if(this.length!=a.length)return!1;for(var b=0,c=this.length;b<c;b++)if(this[b]instanceof Array&&a[b]instanceof Array){if(!d.apply(this[b],[a[b]]))return!1}else if(this[b]!=a[b])return!1;return!0}},{}],18:[function(a,b,c){c.Interop=a("./interop")},{"./interop":19}],19:[function(a,b,c){"use strict";function d(){this.cache={mlB2UMap:{},mlU2BMap:{}}}function e(a){"undefined"!=typeof a.setup&&("active"===a.setup?a.setup="passive":"passive"===a.setup&&(a.setup="active"))}var f=a("./transform"),g=a("./array-equals");b.exports=d,d.prototype.candidateToUnifiedPlan=function(a){var b=new RTCIceCandidate(a);return b.sdpMLineIndex=this.cache.mlB2UMap[b.sdpMLineIndex],b},d.prototype.candidateToPlanB=function(a){var b=new RTCIceCandidate(a);if(0===b.sdpMid.indexOf("audio"))b.sdpMid="audio";else{if(0!==b.sdpMid.indexOf("video"))throw new Error("candidate with "+b.sdpMid+" not allowed");b.sdpMid="video"}return b.sdpMLineIndex=this.cache.mlU2BMap[b.sdpMLineIndex],b},d.prototype.getFirstSendingIndexFromAnswer=function(a){if(!this.cache.answer)return null;var b=f.parse(this.cache.answer);if(b&&b.media&&Array.isArray(b.media))for(var c=0;c<b.media.length;c++)if(b.media[c].type==a&&(!b.media[c].direction||"sendrecv"===b.media[c].direction||"sendonly"===b.media[c].direction))return c;return null},d.prototype.toPlanB=function(a){var b=this;if("object"!=typeof a||null===a||"string"!=typeof a.sdp)return console.warn("An empty description was passed as an argument."),a;var c=f.parse(a.sdp);if("undefined"==typeof c.media||!Array.isArray(c.media)||0===c.media.length)return console.warn("The description has no media."),a;if(c.media.length<=3&&c.media.every(function(a){return["video","audio","data"].indexOf(a.mid)!==-1}))return console.warn("This description does not look like Unified Plan."),a;for(var d=a.sdp,e=!1,g=0;g<c.media.length;g++){var h=c.media[g];h.rtp.forEach(function(a){if("NULL"===a.codec){e=!0;var c=f.parse(b.cache.offer);a.codec=c.media[g].rtp[0].codec}})}e&&(d=f.write(c)),this.cache[a.type]=d;var i=c.media;c.media=[];var j={},k=[];i.forEach(function(a){if(("string"!=typeof a.rtcpMux||"rtcp-mux"!==a.rtcpMux)&&"inactive"!==a.direction)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");if("undefined"!=typeof j[a.type]&&"inactive"!==j[a.type].direction||(j[a.type]=a),a.protocol!=j[a.type].protocol)throw new Error("Cannot convert to Plan B because m-lines have different protocols and this library does not have support for that");if(a.payloads!=j[a.type].payloads)throw new Error("Cannot convert to Plan B because m-lines have different payloads and this library does not have support for that")}),i.forEach(function(a){return"application"===a.type?(c.media.push(a),void k.push(a.mid)):("object"==typeof a.sources&&Object.keys(a.sources).forEach(function(b){"object"!=typeof j[a.type].sources&&(j[a.type].sources={}),j[a.type].sources[b]=a.sources[b],"undefined"!=typeof a.msid&&(j[a.type].sources[b].msid=a.msid)}),"undefined"!=typeof a.ssrcGroups&&Array.isArray(a.ssrcGroups)&&("undefined"!=typeof j[a.type].ssrcGroups&&Array.isArray(j[a.type].ssrcGroups)||(j[a.type].ssrcGroups=[]),j[a.type].ssrcGroups=j[a.type].ssrcGroups.concat(a.ssrcGroups)),void(j[a.type]===a&&(a.mid=a.type,delete a.bundleOnly,delete a.msid,a.type==i[0].type?(k.unshift(a.type),c.media.unshift(a)):(k.push(a.type),c.media.push(a)))))}),"undefined"!=typeof c.groups&&c.groups.some(function(a){if("BUNDLE"===a.type)return a.mids=k.join(" "),!0}),c.msidSemantic={semantic:"WMS",token:"*"};var l=f.write(c);return new RTCSessionDescription({type:a.type,sdp:l})},d.prototype.toUnifiedPlan=function(a){var b=this;if("object"!=typeof a||null===a||"string"!=typeof a.sdp)return console.warn("An empty description was passed as an argument."),a;var c=f.parse(a.sdp);if("undefined"==typeof c.media||!Array.isArray(c.media)||0===c.media.length)return console.warn("The description has no media."),a;if(c.media.length>3||!c.media.every(function(a){return["video","audio","data"].indexOf(a.mid)!==-1}))return console.warn("This description does not look like Plan B."),a;var d=[];c.media.forEach(function(a){d.push(a.mid)});var h=!1;if("undefined"!=typeof c.groups&&Array.isArray(c.groups)&&(h=c.groups.every(function(a){return"BUNDLE"!==a.type||g.apply(a.mids.sort(),[d.sort()])})),!h){var i=!1;if(c.media.forEach(function(a){"inactive"!==a.direction&&(i=!0)}),i)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.")}var j;if("answer"===a.type)j="offer";else{if("offer"!==a.type)throw new Error("Type '"+a.type+"' not supported.");j="answer"}var k;"undefined"!=typeof this.cache[j]&&(k=f.parse(this.cache[j]));var l,m,n,o,p={audio:{},video:{}},q={},r=0,s=0,t={},u={},v={},w={};if(c.media.forEach(function(c){if(("string"!=typeof c.rtcpMux||"rtcp-mux"!==c.rtcpMux)&&"inactive"!==c.direction)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"===c.type)return void(q[c.mid]=c);var d=c.sources,e=c.ssrcGroups,f=c.port;if("undefined"!=typeof c.candidates&&(l="undefined"!=typeof l?l.concat(c.candidates):c.candidates),"undefined"!=typeof m&&"undefined"!=typeof c.iceUfrag&&m!=c.iceUfrag)throw new Error("Only BUNDLE supported, iceUfrag must be the same for all m-lines.\n\tLast iceUfrag: "+m+"\n\tNew iceUfrag: "+c.iceUfrag);if("undefined"!=typeof c.iceUfrag&&(m=c.iceUfrag),"undefined"!=typeof n&&"undefined"!=typeof c.icePwd&&n!=c.icePwd)throw new Error("Only BUNDLE supported, icePwd must be the same for all m-lines.\n\tLast icePwd: "+n+"\n\tNew icePwd: "+c.icePwd);if("undefined"!=typeof c.icePwd&&(n=c.icePwd),"undefined"!=typeof o&&"undefined"!=typeof c.fingerprint&&(o.type!=c.fingerprint.type||o.hash!=c.fingerprint.hash))throw new Error("Only BUNDLE supported, fingerprint must be the same for all m-lines.\n\tLast fingerprint: "+JSON.stringify(o)+"\n\tNew fingerprint: "+JSON.stringify(c.fingerprint));"undefined"!=typeof c.fingerprint&&(o=c.fingerprint),u[c.type]=c.payloads,v[c.type]=c.rtcpFb,w[c.type]=c.rtp;var g={};"undefined"!=typeof e&&Array.isArray(e)&&e.forEach(function(a){"undefined"!=typeof a.ssrcs&&Array.isArray(a.ssrcs)&&a.ssrcs.forEach(function(b){"undefined"==typeof g[b]&&(g[b]=[]),g[b].push(a)})});var h={};if("object"==typeof d)delete c.sources,delete c.ssrcGroups,delete c.candidates,delete c.iceUfrag,delete c.icePwd,delete c.fingerprint,delete c.port,delete c.mid,Object.keys(d).forEach(function(e){var i;return"offer"!==a.type||d[e].msid?("undefined"!=typeof g[e]&&Array.isArray(g[e])&&g[e].some(function(a){return a.ssrcs.some(function(a){if("object"==typeof h[a])return i=h[a],!0})}),void("object"==typeof i?(i.sources[e]=d[e],delete d[e].msid):(i=Object.create(c),h[e]=i,"undefined"!=typeof d[e].msid&&(i.msid=d[e].msid,delete d[e].msid),i.sources={},i.sources[e]=d[e],i.ssrcGroups=g[e],"undefined"!=typeof k&&"undefined"!=typeof k.media&&Array.isArray(k.media)&&k.media.forEach(function(a){"object"==typeof a.sources&&Object.keys(a.sources).forEach(function(b){b===e&&(i.mid=a.mid)})}),"undefined"==typeof i.mid&&(i.mid=[c.type,"-",e].join("")),i.candidates=l,i.iceUfrag=m,i.icePwd=n,i.fingerprint=o,i.port=f,q[i.mid]=i,t[s]=i.sources,b.cache.mlU2BMap[s]=r,"undefined"==typeof b.cache.mlB2UMap[r]&&(b.cache.mlB2UMap[r]=s),s++))):void(p[c.type][e]=d[e])});else{var i=c;i.candidates=l,i.iceUfrag=m,i.icePwd=n,i.fingerprint=o,i.port=f,q[i.mid]=i,b.cache.mlU2BMap[s]=r,"undefined"==typeof b.cache.mlB2UMap[r]&&(b.cache.mlB2UMap[r]=s)}r++}),c.media=[],d=[],"answer"===a.type)for(var x=0;x<k.media.length;x++){var y=k.media[x];delete y.msid,delete y.sources,delete y.ssrcGroups,"undefined"==typeof t[x]?y.direction&&"sendrecv"!==y.direction?"sendonly"===y.direction&&(y.direction="inactive"):y.direction="recvonly":y.direction&&"sendrecv"!==y.direction?"recvonly"===y.direction&&(y.direction="sendonly"):y.direction="sendrecv",y.sources=t[x],y.candidates=l,y.iceUfrag=m,y.icePwd=n,y.fingerprint=o,y.rtp=w[y.type],y.payloads=u[y.type],y.rtcpFb=v[y.type],c.media.push(y),"string"==typeof y.mid&&d.push(y.mid)}else"undefined"!=typeof k&&"undefined"!=typeof k.media&&Array.isArray(k.media)&&k.media.forEach(function(a){d.push(a.mid),"undefined"!=typeof q[a.mid]?c.media.push(q[a.mid]):(delete a.msid,delete a.sources,delete a.ssrcGroups,a.direction&&"sendrecv"!==a.direction||(a.direction="sendonly"),a.direction&&"recvonly"!==a.direction||(a.direction="inactive"),e(a),c.media.push(a))}),Object.keys(q).forEach(function(a){if(d.indexOf(a)===-1)if(d.push(a),"recvonly"===q[a].direction){var b=!1;c.media.some(function(c){if(("sendrecv"===c.direction||"sendonly"===c.direction)&&c.type===q[a].type)return Object.keys(q[a].sources).forEach(function(b){c.sources[b]=q[a].sources[b]}),b=!0,!0}),b||c.media.push(q[a])}else c.media.push(q[a])});["audio","video"].forEach(function(a){if(c&&c.media&&Array.isArray(c.media)){var d=null;if(Object.keys(p[a]).length>0&&(d=b.getFirstSendingIndexFromAnswer(a),null===d))for(var e=0;e<c.media.length;e++)if(c.media[e].type===a){d=e;break}if(d&&c.media.length>d){var f=c.media[d];Object.keys(p[a]).forEach(function(b){f.sources&&f.sources[b]&&console.warn("Replacing an existing SSRC."),f.sources||(f.sources={}),f.sources[b]=p[a][b]})}}}),"undefined"!=typeof c.groups&&c.groups.some(function(a){if("BUNDLE"===a.type)return a.mids=d.join(" "),!0}),c.msidSemantic={semantic:"WMS",token:"*"};var z=f.write(c);return this.cache[a.type]=z,new RTCSessionDescription({type:a.type,sdp:z})}},{"./array-equals":17,"./transform":20}],20:[function(a,b,c){var d=a("sdp-transform");c.write=function(a,b){return"undefined"!=typeof a&&"undefined"!=typeof a.media&&Array.isArray(a.media)&&a.media.forEach(function(a){"undefined"!=typeof a.sources&&0!==Object.keys(a.sources).length&&(a.ssrcs=[],Object.keys(a.sources).forEach(function(b){var c=a.sources[b];Object.keys(c).forEach(function(d){a.ssrcs.push({id:b,attribute:d,value:c[d]})})}),delete a.sources),"undefined"!=typeof a.ssrcGroups&&Array.isArray(a.ssrcGroups)&&a.ssrcGroups.forEach(function(a){"undefined"!=typeof a.ssrcs&&Array.isArray(a.ssrcs)&&(a.ssrcs=a.ssrcs.join(" "))})}),"undefined"!=typeof a&&"undefined"!=typeof a.groups&&Array.isArray(a.groups)&&a.groups.forEach(function(a){"undefined"!=typeof a.mids&&Array.isArray(a.mids)&&(a.mids=a.mids.join(" "))}),d.write(a,b)},c.parse=function(a){var b=d.parse(a);return"undefined"!=typeof b&&"undefined"!=typeof b.media&&Array.isArray(b.media)&&b.media.forEach(function(a){"undefined"!=typeof a.ssrcs&&Array.isArray(a.ssrcs)&&(a.sources={},a.ssrcs.forEach(function(b){a.sources[b.id]||(a.sources[b.id]={}),a.sources[b.id][b.attribute]=b.value}),delete a.ssrcs),"undefined"!=typeof a.ssrcGroups&&Array.isArray(a.ssrcGroups)&&a.ssrcGroups.forEach(function(a){"string"==typeof a.ssrcs&&(a.ssrcs=a.ssrcs.split(" "))})}),"undefined"!=typeof b&&"undefined"!=typeof b.groups&&Array.isArray(b.groups)&&b.groups.forEach(function(a){"string"==typeof a.mids&&(a.mids=a.mids.split(" "))}),b}},{"sdp-transform":14}],21:[function(b,c,d){!function(b,e){"use strict";var f="0.7.18",g="",h="?",i="function",j="undefined",k="object",l="string",m="major",n="model",o="name",p="type",q="vendor",r="version",s="architecture",t="console",u="mobile",v="tablet",w="smarttv",x="wearable",y="embedded",z={extend:function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2===0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},has:function(a,b){return"string"==typeof a&&b.toLowerCase().indexOf(a.toLowerCase())!==-1},lowerize:function(a){return a.toLowerCase()},major:function(a){return typeof a===l?a.replace(/[^\d\.]/g,"").split(".")[0]:e},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},A={rgx:function(a,b){for(var c,d,f,g,h,j,l=0;l<b.length&&!h;){var m=b[l],n=b[l+1];for(c=d=0;c<m.length&&!h;)if(h=m[c++].exec(a))for(f=0;f<n.length;f++)j=h[++d],g=n[f],typeof g===k&&g.length>0?2==g.length?typeof g[1]==i?this[g[0]]=g[1].call(this,j):this[g[0]]=g[1]:3==g.length?typeof g[1]!==i||g[1].exec&&g[1].test?this[g[0]]=j?j.replace(g[1],g[2]):e:this[g[0]]=j?g[1].call(this,j,g[2]):e:4==g.length&&(this[g[0]]=j?g[3].call(this,j.replace(g[1],g[2])):e):this[g]=j?j:e;l+=2}},str:function(a,b){for(var c in b)if(typeof b[c]===k&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(z.has(b[c][d],a))return c===h?e:c}else if(z.has(b[c],a))return c===h?e:c;return a}},B={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},C={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,r],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],r],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],r],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[o,r],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],r],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[o,"Edge"],r],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],r],[/(puffin)\/([\w\.]+)/i],[[o,"Puffin"],r],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],r],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],r],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],r],[/(qqbrowserlite)\/([\w\.]+)/i],[o,r],[/(QQ)\/([\d\.]+)/i],[o,r],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,r],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[o,r],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[o,r],[/(MetaSr)[\/\s]?([\w\.]+)/i],[o],[/(LBBROWSER)/i],[o],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[r,[o,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[r,[o,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[r,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],r],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],r],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[r,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,r],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],r],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],r],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],r],[/fxios\/([\w\.-]+)/i],[r,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[r,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[r,o],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[o,"GSA"],r],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[r,A.str,B.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,r],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],r],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,r]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,z.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[s,/ower/,"",z.lowerize]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[s,z.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[n,q,[p,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[n,[q,"Apple"],[p,v]],[/(apple\s{0,1}tv)/i],[[n,"Apple TV"],[q,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[q,n,[p,v]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[n,[q,"Amazon"],[p,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[n,A.str,B.device.amazon.model],[q,"Amazon"],[p,u]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[n,q,[p,u]],[/\((ip[honed|\s\w*]+);/i],[n,[q,"Apple"],[p,u]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[q,n,[p,u]],[/\(bb10;\s(\w+)/i],[n,[q,"BlackBerry"],[p,u]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[n,[q,"Asus"],[p,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[q,"Sony"],[n,"Xperia Tablet"],[p,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[n,[q,"Sony"],[p,u]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[q,n,[p,t]],[/android.+;\s(shield)\sbuild/i],[n,[q,"Nvidia"],[p,t]],[/(playstation\s[34portablevi]+)/i],[n,[q,"Sony"],[p,t]],[/(sprint\s(\w+))/i],[[q,A.str,B.device.sprint.vendor],[n,A.str,B.device.sprint.model],[p,u]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[q,n,[p,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[q,[n,/_/g," "],[p,u]],[/(nexus\s9)/i],[n,[q,"HTC"],[p,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[n,[q,"Huawei"],[p,u]],[/(microsoft);\s(lumia[\s\w]+)/i],[q,n,[p,u]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[n,[q,"Microsoft"],[p,t]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[q,"Microsoft"],[p,u]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[n,[q,"Motorola"],[p,u]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[n,[q,"Motorola"],[p,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[q,z.trim],[n,z.trim],[p,w]],[/hbbtv.+maple;(\d+)/i],[[n,/^/,"SmartTV"],[q,"Samsung"],[p,w]],[/\(dtv[\);].+(aquos)/i],[n,[q,"Sharp"],[p,w]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[q,"Samsung"],n,[p,v]],[/smart-tv.+(samsung)/i],[q,[p,w],n],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[q,"Samsung"],n,[p,u]],[/sie-(\w*)/i],[n,[q,"Siemens"],[p,u]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[q,"Nokia"],n,[p,u]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[n,[q,"Acer"],[p,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[n,[q,"LG"],[p,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[q,"LG"],n,[p,v]],[/(lg) netcast\.tv/i],[q,n,[p,w]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[n,[q,"LG"],[p,u]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[n,[q,"Lenovo"],[p,v]],[/linux;.+((jolla));/i],[q,n,[p,u]],[/((pebble))app\/[\d\.]+\s/i],[q,n,[p,x]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[q,n,[p,u]],[/crkey/i],[[n,"Chromecast"],[q,"Google"]],[/android.+;\s(glass)\s\d/i],[n,[q,"Google"],[p,x]],[/android.+;\s(pixel c)\s/i],[n,[q,"Google"],[p,v]],[/android.+;\s(pixel xl|pixel)\s/i],[n,[q,"Google"],[p,u]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[n,/_/g," "],[q,"Xiaomi"],[p,u]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[n,/_/g," "],[q,"Xiaomi"],[p,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[n,[q,"Meizu"],[p,v]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[n,[q,"OnePlus"],[p,u]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[n,[q,"RCA"],[p,v]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[n,[q,"Dell"],[p,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[n,[q,"Verizon"],[p,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[q,"Barnes & Noble"],n,[p,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[n,[q,"NuVision"],[p,v]],[/android.+;\s(k88)\sbuild/i],[n,[q,"ZTE"],[p,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[n,[q,"Swiss"],[p,u]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[n,[q,"Swiss"],[p,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[n,[q,"Zeki"],[p,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[q,"Dragon Touch"],n,[p,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[n,[q,"Insignia"],[p,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[n,[q,"NextBook"],[p,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[q,"Voice"],n,[p,u]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[q,"LvTel"],n,[p,u]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[n,[q,"Envizen"],[p,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[q,n,[p,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[n,[q,"MachSpeed"],[p,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[q,n,[p,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[n,[q,"Rotor"],[p,v]],[/android.+(KS(.+))\s+build/i],[n,[q,"Amazon"],[p,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[q,n,[p,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[p,z.lowerize],q,n],[/(android[\w\.\s\-]{0,9});.+build/i],[n,[q,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[r,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,r],[/rv\:([\w\.]{1,9}).+(gecko)/i],[r,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,r],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[r,A.str,B.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[r,A.str,B.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],r],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[o,r],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[o,"Symbian"],r],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],r],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[o,r],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],r],[/(sunos)\s?([\w\.\d]*)/i],[[o,"Solaris"],r],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[o,r],[/(haiku)\s(\w+)/i],[o,r],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[r,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[r,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[o,r]]},D=function(a,c){if("object"==typeof a&&(c=a,a=e),!(this instanceof D))return new D(a,c).getResult();var d=a||(b&&b.navigator&&b.navigator.userAgent?b.navigator.userAgent:g),f=c?z.extend(C,c):C;return this.getBrowser=function(){var a={name:e,version:e};return A.rgx.call(a,d,f.browser),a.major=z.major(a.version),a},this.getCPU=function(){var a={architecture:e};return A.rgx.call(a,d,f.cpu),a},this.getDevice=function(){var a={vendor:e,model:e,type:e};return A.rgx.call(a,d,f.device),a},this.getEngine=function(){var a={name:e,version:e};return A.rgx.call(a,d,f.engine),a},this.getOS=function(){var a={name:e,version:e};return A.rgx.call(a,d,f.os),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(a){return d=a,this},this};D.VERSION=f,D.BROWSER={NAME:o,MAJOR:m,VERSION:r},D.CPU={ARCHITECTURE:s},D.DEVICE={MODEL:n,VENDOR:q,TYPE:p,CONSOLE:t,MOBILE:u,SMARTTV:w,TABLET:v,WEARABLE:x,EMBEDDED:y},D.ENGINE={NAME:o,VERSION:r},D.OS={NAME:o,VERSION:r},typeof d!==j?(typeof c!==j&&c.exports&&(d=c.exports=D),d.UAParser=D):typeof a===i&&a.amd?a(function(){return D}):b&&(b.UAParser=D);var E=b&&(b.jQuery||b.Zepto);if(typeof E!==j){var F=new D;E.ua=F.getResult(),E.ua.get=function(){return F.getUA()},E.ua.set=function(a){F.setUA(a);var b=F.getResult();for(var c in b)E.ua[c]=b[c]}}}("object"==typeof window?window:this)},{}],22:[function(a,b,c){(function(a){var c,d=a.crypto||a.msCrypto;if(d&&d.getRandomValues){var e=new Uint8Array(16);c=function(){return d.getRandomValues(e),e}}if(!c){var f=new Array(16);c=function(){for(var a,b=0;b<16;b++)0===(3&b)&&(a=4294967296*Math.random()),f[b]=a>>>((3&b)<<3)&255;return f}}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(a,b,c){function d(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){e<16&&(b[d+e++]=j[a])});e<16;)b[d+e++]=0;return b}function e(a,b){var c=b||0,d=i;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function f(a,b,c){var d=b&&c||0,f=b||[];a=a||{};var g=void 0!==a.clockseq?a.clockseq:n,h=void 0!==a.msecs?a.msecs:(new Date).getTime(),i=void 0!==a.nsecs?a.nsecs:p+1,j=h-o+(i-p)/1e4;if(j<0&&void 0===a.clockseq&&(g=g+1&16383),(j<0||h>o)&&void 0===a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=h,p=i,n=g,h+=122192928e5;var k=(1e4*(268435455&h)+i)%4294967296;f[d++]=k>>>24&255,f[d++]=k>>>16&255,f[d++]=k>>>8&255,f[d++]=255&k;var l=h/4294967296*1e4&268435455;f[d++]=l>>>8&255,f[d++]=255&l,f[d++]=l>>>24&15|16,f[d++]=l>>>16&255,f[d++]=g>>>8|128,f[d++]=255&g;for(var q=a.node||m,r=0;r<6;r++)f[d+r]=q[r];return b?b:e(f)}function g(a,b,c){var d=b&&c||0;"string"==typeof a&&(b="binary"==a?new Array(16):null,a=null),a=a||{};var f=a.random||(a.rng||h)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,b)for(var g=0;g<16;g++)b[d+g]=f[g];return b||e(f)}for(var h=a("./rng"),i=[],j={},k=0;k<256;k++)i[k]=(k+256).toString(16).substr(1),j[i[k]]=k;var l=h(),m=[1|l[0],l[1],l[2],l[3],l[4],l[5]],n=16383&(l[6]<<8|l[7]),o=0,p=0,q=g;q.v1=f,q.v4=g,q.parse=d,q.unparse=e,b.exports=q},{"./rng":22}],24:[function(a,b,c){function d(){}b.exports=d,d.mixin=function(a){var b=a.prototype||a;b.isWildEmitter=!0,b.on=function(a,b,c){this.callbacks=this.callbacks||{};var d=3===arguments.length,e=d?arguments[1]:void 0,f=d?arguments[2]:arguments[1];return f._groupName=e,(this.callbacks[a]=this.callbacks[a]||[]).push(f),this},b.once=function(a,b,c){function d(){e.off(a,d),h.apply(this,arguments)}var e=this,f=3===arguments.length,g=f?arguments[1]:void 0,h=f?arguments[2]:arguments[1];return this.on(a,g,d),this},b.releaseGroup=function(a){this.callbacks=this.callbacks||{};var b,c,d,e;for(b in this.callbacks)for(e=this.callbacks[b],c=0,d=e.length;c<d;c++)e[c]._groupName===a&&(e.splice(c,1),c--,d--);return this},b.off=function(a,b){this.callbacks=this.callbacks||{};var c,d=this.callbacks[a];return d?1===arguments.length?(delete this.callbacks[a],this):(c=d.indexOf(b),d.splice(c,1),0===d.length&&delete this.callbacks[a],this):this},b.emit=function(a){this.callbacks=this.callbacks||{};var b,c,d,e=[].slice.call(arguments,1),f=this.callbacks[a],g=this.getWildcardCallbacks(a);if(f)for(d=f.slice(),b=0,c=d.length;b<c&&d[b];++b)d[b].apply(this,e);if(g)for(c=g.length,d=g.slice(),b=0,c=d.length;b<c&&d[b];++b)d[b].apply(this,[a].concat(e));return this},b.getWildcardCallbacks=function(a){this.callbacks=this.callbacks||{};var b,c,d=[];for(b in this.callbacks)c=b.split("*"),("*"===b||2===c.length&&a.slice(0,c[0].length)===c[0])&&(d=d.concat(this.callbacks[b]));return d}},d.mixin(d)},{}]},{},[2])(2)});
//# sourceMappingURL=ACEKurento-1.0.0.min.js.map